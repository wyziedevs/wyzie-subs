"use strict";class unzipjs{constructor(){this.values={next_code:new Uint16Array(16),bl_count:new Uint16Array(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new Uint16Array(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new Uint32Array(32),flmap:new Uint16Array(512),fltree:[],fdmap:new Uint16Array(32),fdtree:[],lmap:new Uint16Array(32768),ltree:[],ttree:[],dmap:new Uint16Array(32768),dtree:[],imap:new Uint16Array(512),itree:[],rev15:new Uint16Array(32768),lhst:new Uint32Array(286),dhst:new Uint32Array(30),ihst:new Uint32Array(19),lits:new Uint32Array(15e3),strt:new Uint16Array(65536),prev:new Uint16Array(32768)},this.init()}parse(e,r=!1){var t,i=this.readUshort,a=this.readUint,n=[];for(t=(e=new Uint8Array(e)).length-4;101010256!=a(e,t);)t--;var s=i(e,t=t+4+4);i(e,t+=2),a(e,t+=2),t=a(e,t+=4);for(var f=0;f<s;f++){a(e,t),t+=4,t+=4,t+=4,a(e,t+=4);var o=a(e,t+=4),d=a(e,t+=4),h=i(e,t+=4),l=i(e,t+2),u=i(e,t+4);t+=6;var c=a(e,t+=8);t+=4,t+=h+l+u,this.readLocal(e,c,n,o,d,r)}return n}readLocal(e,r,t,i,a,n){var s=this.readUshort,f=this.readUint;f(e,r),s(e,r+=4),s(e,r+=2);var o=s(e,r+=2);f(e,r+=2),f(e,r+=4),f=s(e,r=r+4+8);var d=s(e,r+=2);if(r+=2,s=this.readUTF8(e,r,f),r+=f,r+=d,n)t[s]={size:a,csize:i};else if(e=new Uint8Array(e.buffer,r),0==o)t[s]=new Uint8Array(e.buffer.slice(r,r+i));else{if(8!=o)throw"unknown compression method: "+o;r=new Uint8Array(a),this.inflateRaw(e,r),t.push({name:s,buffer:r,toString:function(){let e="";try{e=new TextDecoder("utf8",{fatal:!0}).decode(this.buffer)}catch{}return e}})}}inflateRaw(e,r){return this.F_inflate(e,r)}inflate(e,r){return this.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),r)}readUshort(e,r){return e[r]|e[r+1]<<8}readUint(e,r){return 16777216*e[r+3]+(e[r+2]<<16|e[r+1]<<8|e[r])}readASCII(e,r,t){for(var i="",a=0;a<t;a++)i+=String.fromCharCode(e[r+a]);return i}pad(e){return 2>e.length?"0"+e:e}readUTF8(e,r,t){for(var i,a="",n=0;n<t;n++)a+="%"+this.pad(e[r+n].toString(16));try{i=decodeURIComponent(a)}catch(i){return this.readASCII(e,r,t)}return i}F_inflate(e,r){var t=Uint8Array;if(3==e[0]&&0==e[1])return r||new t(0);var i=this.bitsF,a=this.bitsE,n=this.get17,s=this.values,f=null==r;f&&(r=new t(e.length>>>2<<3));for(var o,d,h,l,u=0,c=0,v=d=0,p=0;0==u;)if(u=i(e,p,1),o=i(e,p+1,2),p+=3,0==o)0!=(7&p)&&(p+=8-(7&p)),o=e[(p=4+(p>>>3))-4]|e[p-3]<<8,f&&(r=this._check(r,v+o)),r.set(new t(e.buffer,e.byteOffset+p,o),v),p=p+o<<3,v+=o;else{if(f&&(r=this._check(r,v+131072)),1==o&&(h=s.flmap,l=s.fdmap,c=511,d=31),2==o){for(d=a(e,p,5)+257,o=a(e,p+5,5)+1,h=a(e,p+10,4)+4,p+=14,l=0;38>l;l+=2)s.itree[l]=0,s.itree[l+1]=0;for(c=1,l=0;l<h;l++){var m=a(e,p+3*l,3);s.itree[1+(s.ordr[l]<<1)]=m,m>c&&(c=m)}p+=3*h,this.makeCodes(s.itree,c),this.codes2map(s.itree,c,s.imap),h=s.lmap,l=s.dmap,p=this._decodeTiny(s.imap,(1<<c)-1,d+o,e,p,s.ttree),c=(1<<(m=this._copyOut(s.ttree,0,d,s.ltree)))-1,d=(1<<(o=this._copyOut(s.ttree,d,o,s.dtree)))-1,this.makeCodes(s.ltree,m),this.codes2map(s.ltree,m,h),this.makeCodes(s.dtree,o),this.codes2map(s.dtree,o,l)}for(;;)if(p+=15&(o=h[n(e,p)&c]),0==(m=o>>>4)>>>8)r[v++]=m;else{if(256==m)break;o=v+m-254,264<m&&(o=v+((m=s.ldef[m-257])>>>3)+a(e,p,7&m),p+=7&m),p+=15&(m=l[n(e,p)&d]);var y=((m=s.ddef[m>>>4])>>>4)+i(e,p,15&m);for(p+=15&m,f&&(r=this._check(r,v+131072));v<o;)r[v]=r[v++-y],r[v]=r[v++-y],r[v]=r[v++-y],r[v]=r[v++-y];v=o}}return r.length==v?r:r.slice(0,v)}_check(e,r){var t=e.length;return r<=t?e:((r=new Uint8Array(Math.max(t<<1,r))).set(e,0),r)}_decodeTiny(e,r,t,i,a,n){for(var s=this.bitsE,f=this.get17,o=0;o<t;){var d=e[f(i,a)&r];a+=15&d;var h=d>>>4;if(15>=h)n[o]=h,o++;else{var l=d=0;for(16==h?(l=3+s(i,a,2),a+=2,d=n[o-1]):17==h?(l=3+s(i,a,3),a+=3):18==h&&(l=11+s(i,a,7),a+=7),h=o+l;o<h;)n[o]=d,o++}}return a}_copyOut(e,r,t,i){for(var a=0,n=0,s=i.length>>>1;n<t;){var f=e[n+r];i[n<<1]=0,i[1+(n<<1)]=f,f>a&&(a=f),n++}for(;n<s;)i[n<<1]=0,i[1+(n<<1)]=0,n++;return a}makeCodes(e,r){var t,i,a=this.values,n=e.length,s=a.bl_count;for(t=0;t<=r;t++)s[t]=0;for(t=1;t<n;t+=2)s[e[t]]++;for(a=a.next_code,t=0,s[0]=0,i=1;i<=r;i++)t=t+s[i-1]<<1,a[i]=t;for(r=0;r<n;r+=2)0!=(s=e[r+1])&&(e[r]=a[s],a[s]++)}codes2map(e,r,t){for(var i=e.length,a=this.values.rev15,n=0;n<i;n+=2)if(0!=e[n+1]){var s=e[n+1],f=n>>1<<4|s,o=r-s;for(o=(s=e[n]<<o)+(1<<o);s!=o;)t[a[s]>>>15-r]=f,s++}}FrevCodes(e,r){for(var t=this.values.rev15,i=15-r,a=0;a<e.length;a+=2)e[a]=t[e[a]<<r-e[a+1]]>>>i}bitsE(e,r,t){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<t)-1}bitsF(e,r,t){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<t)-1}get17(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)}init(){function e(e,r,t){for(;0!=r--;)e.push(0,t)}for(var r=this.values,t=0;32768>t;t++){var i=t;i=(4278255360&(i=(4042322160&(i=(3435973836&(i=(2863311530&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8,r.rev15[t]=(i>>>16|i<<16)>>>17}for(t=0;32>t;t++)r.ldef[t]=r.of0[t]<<3|r.exb[t],r.ddef[t]=r.df0[t]<<4|r.dxb[t];e(r.fltree,144,8),e(r.fltree,112,9),e(r.fltree,24,7),e(r.fltree,8,8),this.makeCodes(r.fltree,9),this.codes2map(r.fltree,9,r.flmap),this.FrevCodes(r.fltree,9),e(r.fdtree,32,5),this.makeCodes(r.fdtree,5),this.codes2map(r.fdtree,5,r.fdmap),this.FrevCodes(r.fdtree,5),e(r.itree,19,0),e(r.ltree,286,0),e(r.dtree,30,0),e(r.ttree,320,0)}}"object"==typeof module&&(module.exports=new unzipjs);